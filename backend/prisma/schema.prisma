generator client {
  provider = "prisma-client-js"
}

datasource db {
  provider = "sqlite"
  url      = "file:./dev.db"
}

model User {
  id        Int       @id @default(autoincrement())
  nome      String
  email     String    @unique
  senha     String
  plantas   Planta[]
  chats     ChatIA[]
  criadoEm  DateTime  @default(now())
}

model Especie {
  id        Int       @id @default(autoincrement())
  nome      String    
  descricao String?
  cuidados  String?   // infos fixas que você guarda na sua própria API
  imagem    String?   // guardar imagem por url
  plantas   Planta[]
}

model Planta {
  id        Int       @id @default(autoincrement())
  apelido   String?   // tipo "Rosa da varanda"
  criadoEm  DateTime  @default(now())
  ambiente  String
  userId    Int
  user      User      @relation(fields: [userId], references: [id])
  especieId Int
  especie   Especie   @relation(fields: [especieId], references: [id])
  rotinas   Rotina[]
}

model Rotina {
  id        Int      @id @default(autoincrement())
  descricao String?  
  frequencia String? 
  horario   String?  
  plantaId  Int
  planta    Planta   @relation(fields: [plantaId], references: [id])
}

model ChatIA {
  id        Int      @id @default(autoincrement())
  mensagem  String
  imagemUrl String?  // pra armazenar fotos temporárias do usuário
  criadoEm  DateTime @default(now())
  userId    Int
  user      User     @relation(fields: [userId], references: [id])
}
